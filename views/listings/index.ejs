<% layout("/layouts/boilerplate") %>

<div id="filters" class="filters-container">
	<a href="/listings?category=trending" class="filter">
		<div><i class="fa-solid fa-fire"></i></div>
		<p>Trending</p>
	</a>
	<a href="/listings?category=rooms" class="filter">
		<div><i class="fa-solid fa-bed"></i></div>
		<p>Rooms</p>
	</a>
	<a href="/listings?category=iconic cities" class="filter">
		<div><i class="fa-solid fa-city"></i></div>
		<p>Iconic Cities</p>
	</a>
	<a href="/listings?category=mountains" class="filter">
		<div><i class="fa-solid fa-mountain-city"></i></div>
		<p>Mountains</p>
	</a>
	<a href="/listings?category=castles" class="filter">
		<div><i class="fa-brands fa-fort-awesome"></i></div>
		<p>Castles</p>
	</a>
	<a href="/listings?category=amazing pools" class="filter">
		<div><i class="fa-solid fa-person-swimming"></i></div>
		<p>Amazing Pools</p>
	</a>
	<a href="/listings?category=camping" class="filter">
		<div><i class="fa-solid fa-campground"></i></div>
		<p>Camping</p>
	</a>
	<a href="/listings?category=farms" class="filter">
		<div><i class="fa-solid fa-cow"></i></div>
		<p>Farms</p>
	</a>
	<a href="/listings?category=Arctic" class="filter">
		<div><i class="fa-regular fa-snowflake"></i></div>
		<p>Arctic</p>
	</a>
	<a href="/listings?category=domes" class="filter">
		<div><i class="fa-solid fa-igloo"></i></div>
		<p>Domes</p>
	</a>
	<a href="/listings?category=boats" class="filter">
		<div><i class="fa-solid fa-ship"></i></div>
		<p>Boats</p>
	</a>

	<div class="tax-toggle">
		<div class="form-check-reverse form-switch">
			<input
				class="form-check-input"
				type="checkbox"
				role="switch"
				id="flexSwitchCheckDefault"
			/>
			<label class="form-check-label" for="flexSwitchCheckDefault">
				Display total after taxes
			</label>
		</div>
	</div>
</div>

<div class="row row-cols-lg-3 row-cols-md-3 row-cols-sm-1">
	<% for (let listing of allListings) { %>
	<a href="/listings/<%=listing._id%>" class="listing-link">
		<div class="card col listing-card">
			<img
				src="<%=listing.image.url%>"
				class="card-img-top"
				style="height: 20rem"
				alt="listing_image"
			/>
			<div class="card-img-overlay"></div>
			<div class="card-body">
				<p class="card-text">
					<b><%= listing.title %></b> <br />
					&#8377; <%=listing.price.toLocaleString("en-IN")%> / night
					<i class="tax-info">&nbsp; &nbsp;+18% GST</i>
				</p>
			</div>
		</div>
	</a>
	<% } %>
</div>

<script>
	let taxSwitch = document.getElementById("flexSwitchCheckDefault");
	taxSwitch.addEventListener("click", () => {
		let taxInfo = document.getElementsByClassName("tax-info");
		for (info of taxInfo) {
			if (taxSwitch.checked) {
				info.style.display = "inline";
			} else {
				info.style.display = "none";
			}
		}
	});
</script>
